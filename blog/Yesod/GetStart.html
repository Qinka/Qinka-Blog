<div class="homemain">
  <h1>Yesod 学习笔记 - 1</h1>
  <br/>
  <ul>
    <li><a href="#introduction"> 导论 </a></li>
    <li><a href="#settingEnv"> 环境配置 </a></li>
    <li><a href="#helloWorld"> Hello World </a></li>
    <li><a href="#resourceAndTypeSafeURLs"> Resource and Type-Safe URLs </a></li>
    <li><a href="#hamlet"> Hamlet (HTML) </a></li>
    <li><a href="#luciusCassius"> Lucius and Cassius (CSS) </a></li>
    <li><a href="#julius"> Julius (JavaScript) </a></li>
    <li><a href="#note"> 笔记注释 </a></li>
    <li><a href="#bibliography"> Bibliography </a></li>
  </ul>
  <br/>
  <h2 id="introduction"> 导论 </h2>
    <p>
      一个并不合适的叫法，导论。然而还是这样叫了，
      Yesod Book 叫的是 “Introduction”<sup>[<cite>1.a</cite>]</sup>。
      Yesod 是 Haskell 中的这样 Web 框架之一。
      Yesod 的特性之一是开源的。而同时 Yesod 提供了几个 DSL，来开发 Web。
      Web 所需的有 HTML，CSS，JavaScript 由 Hamlet、Lucius、Cassius 与
      Julius。
    </p>
    <p>
      其中 Haskell 具有 类型安全、代码简介、性能表现优异、容易分块。
      而 Haskell 的 TemplateHaskell 与 QuasiQuotes 等特性。
      使得 Yesod 的效率如鱼得水。
    </p>
  <h2 id="settingEnv"> 环境配置 </h2>
    <h3> 通用配置的内容 </h3>
      <p>
        通用的 “配置” 是指的是说 在 Windows、Linux、Mac OS X 等系统上
        配置的共性设置。
      </p>
      <p>
        首先来说所需要的是一个能正常“工作”的 Haskell 环境。包括一个正常的
        GHC<sup>(<cite>i</cite>)</sup> 与 Cabal（或 Stack）。
        使用 cabal 与 stack 安装 yesod 。
        <pre>
          <code>
$ cabal update
$ cabal install yesod
          </code>
        </pre>
        安装好之后应该可以在 GHCi 中可以执行：
        <pre>
          <code>
Prelude> import Yesod
Prelude Yesod>_
          </code>
        </pre>
        然后既可以使用了。
      </p>
      <p>
        然后，就可以开始了。
      </p>
  <h2 id="helloWorld"> Hello World </h2>
    <p>
      先上 <a href="/txt/source/yesod/getstart/helloworld.hs">代码</a>。
    </p>
    <pre>
      <core class="haskell">
{-# LANGUAGE OverloadedStrings
           , QuasiQuotes
           , TemplateHaskell
           , TypeFamilies
           , ViewPatterns
           #-}

import Yesod

data HelloWorld = HelloWorld

mkYesod "HelloWorld" [parseRoutes|
/ HomeR GET
|]

instance Yesod HelloWorld

getHomeR :: Handler Html
getHomeR = defaultLayout [whamlet|Hello, World!|]


main :: IO ()
main = warp 3000 HelloWorld
      </core>
    </pre>
    <p>
      最一开始的语言特性的开关，并不会在这里详细解释<sup>(<cite>ii</cite>)</sup>。
      然后导入的 Yesod 模块是最基本的，用 Yesod 框架写 Web 应用的最少引用。
      同时 Yesod 模块导入了一些其他基本的模块 <sup>(<cite>iii</cite>)</sup>。
      之后定义的类型及其构造器是 整个基于 Yesod 框架的应用的提拉点。而其中可包含整个
      应用中所需要的最关键的数据（变量）。之后会提到如何通过 getYesod 函数获得这个东西。
    </p>
  <h2 id="resourceAndTypeSafeURLs"> Resource and Type-Safe URLs </h2>
  <h2 id="hamlet"> Hamlet (HTML)</h2>
  <h2 id="luciusCassius"> Lucius and Cassius (CSS) </h2>
  <h2 id="julius"> Julius (JavaScript) </h2>
  <h2 id="note"> 笔记注释 </h2>
    <h4> * Yesod Web Framework </h4>
      <p>
        Yesod 是一个 Web 应用 的框架，可以用来搭建后端、网站等，有着许多特性。
        其主页是 <a href="www.yesodweb.com"> Yesod Web Framework</a>。
        其主页提供了 图书《Developing Web Applications with Haskell and Yesod》
        的电子版，可供在线阅读。该书由 O'REILLY 出版社出版。国内暂无翻译版或影印版。
      </p>
    <h4> i. GHC 在 某些系统上的 上的坑</h4>
      <p>
        首先呢 要肯定的是 Windows 上 GHC 7.10.3 上是可以正常工作的。
        其他的编译器版本应该会因为连接器的问题而挂掉。同时笔者这里用的是 Windows 10。
      </p>
      <p>
        然后的一个问题是，在某些 Mac 上会出现连接的问题，在编译的时候。而使用
        交互模式是没有问题的。
      </p>
    <h4> ii. Glasgow Haskell Compilation User's Guide </h4>
      <p>
        这些的语言特性等“内容”可以再 User's Guide 中的找到。
      </p>
    <h4> iii. The Module Imported by Yesod <sup>[<cite>2.a</cite>]</sup> </h4>
      <p>
        Yesod 模块导出的 模块。
      </p>
      <pre>
        <core class="haskell">
module Yesod.Core    -- package: yesod-core
module Yesod.Form    -- package: yesod-form
module Yesod.Persist -- package: yesod-persistent
        </core>
      </pre>
      <p>
        Yesod.Core 模块导出的模块
      </p>
      <pre>
        <core class="haskell">
module Yesod.Core.Content
module Yesod.Core.Dispatch
module Yesod.Core.Handler
module Yesod.Core.Widget
module Yesod.Core.Json
module Text.Shakespeare.I18N -- package: shakespeare
module Text.Blaze.Html       -- package: blaze-html
        </core>
      </pre>
      <p>
        Yesod.Core 导出的函数、类型与类型类
      </p>
      <pre>
        <core class="haskell">
putTime :: UTCTime -> Put Source
getTime :: Get UTCTime Source
formatW3 :: UTCTime -> Text Source
formatRFC1123 :: UTCTime -> Text Source
formatRFC822 :: UTCTime -> Text Source
getCurrentMaxExpiresRFC1123 :: IO Text
class MonadTrans t where
  lift :: Monad m => m a -> t m a
class Monad m => MonadIO m where
  liftIO :: IO a -> m a
class (Applicative b, Applicative m, Monad b, Monad m) => MonadBase b m | m -> b where
  liftBase :: b α -> m α
class MonadBase b m => MonadBaseControl b m | m -> b
class (MonadThrow m, MonadIO m, Applicative m, MonadBase IO m) => MonadResource m where
  liftResourceT :: ResourceT IO a -> m a
class Monad m => MonadLogger m
hamlet :: QuasiQuoter
shamlet :: QuasiQuoter
xhamlet :: QuasiQuoter
type HtmlUrl url = Render url -> Html
julius :: QuasiQuoter
type JavascriptUrl url = (url -> [(Text, Text)] -> Text) -> Javascript
renderJavascriptUrl :: (url -> [(Text, Text)] -> Text) -> JavascriptUrl url -> Text
cassius :: QuasiQuoter
lucius :: QuasiQuoter
type CssUrl url = (url -> [(Text, Text)] -> Text) -> Css
renderCssUrl :: (url -> [(Text, Text)] -> Text) -> CssUrl url -> Text
        </core>
      </pre>
      <p>
         Yesod.Persist 导出的模块。
      </p>
      <pre>
        <core>
module Database.Persist       -- package: persistent
module Database.Persist.TH    -- package: persistent-template
module Yesod.Persist.Core
        </core>
      </pre>
  <h2 id="bibliography"> Bibliography </h2>
    <ol>
      <li>
        Michael Snoyman. <i>Developing Web Applications with Haskell and Yesod, Second Edition</i>.O'REILLY, 2015.
        <ol type="a">
          <li>
            Introduction (Chapter 1, Part I), Page 1.
          </li>
        </ol>
      </li>
      <li>
        Haskell Community and the contributors of packages.<a href="hackage.haskell.org">Hackage's</a> documents(Haddock).
        <ol type="a">
          <li>
            The documents of Yesod's package: yesod, yesod-core, and yesod-persistent.
          </li>
        </ol>
      </li>
    </ol>
</div>
<link rel="stylesheet" href="/txt/css/zenburn.css" type="text/css"/>
<script src="/txt/javascript/highlight.js"></script>
<script>hljs.initHighlightingOnLoad(); </script>
